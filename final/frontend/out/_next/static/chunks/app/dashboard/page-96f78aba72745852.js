(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9300:function(e,t,a){Promise.resolve().then(a.bind(a,20539))},20539:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ej}});var s=a(57437),r=a(2265),l=a(24033),n=a(61396),i=a.n(n),o=a(10826);let c={PKR:"Rs",USD:"$",EUR:"€",GBP:"\xa3",SAR:"SR",AED:"د.إ"};function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PKR",a=c[t]||t;return"".concat(a," ").concat(e.toFixed(2))}var m=a(11543),x=a(72894),h=a(85790),u=a(74522),p=a(34822),g=a(1657);function f(e){let{report:t,loading:a,currency:r}=e;if(a)return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(e=>(0,s.jsxs)(m.Z,{className:"p-6 h-32 animate-pulse bg-slate-100/50",children:[(0,s.jsx)("div",{className:"h-4 bg-slate-200 rounded w-1/2 mb-4"}),(0,s.jsx)("div",{className:"h-8 bg-slate-200 rounded w-3/4"})]},e))});let l=(null==t?void 0:t.totalIncome)||(null==t?void 0:t.total_income)||0,n=(null==t?void 0:t.totalExpense)||(null==t?void 0:t.total_expense)||0,i=(null==t?void 0:t.balance)||0,o=i<0;return(0,s.jsxs)("div",{className:"space-y-6",children:[o&&(0,s.jsxs)("div",{className:"bg-danger-50 border border-danger-100 text-danger-700 p-4 rounded-2xl shadow-sm flex items-center gap-3 animate-slide-up",children:[(0,s.jsx)("div",{className:"bg-danger-100 p-2 rounded-full",children:(0,s.jsx)(x.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"Negative Balance Warning"}),(0,s.jsxs)("p",{className:"text-sm opacity-90",children:["Your expenses exceed your income. Current balance: ",(0,s.jsx)("span",{className:"font-bold",children:d(i,r)})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)(m.Z,{hover:!0,className:"p-6 bg-gradient-to-br from-success-500 to-emerald-600 text-white border-none",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-success-100 text-sm font-medium mb-1",children:"Total Income"}),(0,s.jsx)("p",{className:"text-3xl font-bold tracking-tight",children:d(l,r)})]}),(0,s.jsx)("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:(0,s.jsx)(h.Z,{className:"w-8 h-8 text-white"})})]})}),(0,s.jsx)(m.Z,{hover:!0,className:"p-6 bg-gradient-to-br from-danger-500 to-rose-600 text-white border-none",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-danger-100 text-sm font-medium mb-1",children:"Total Expenses"}),(0,s.jsx)("p",{className:"text-3xl font-bold tracking-tight",children:d(n,r)})]}),(0,s.jsx)("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 text-white"})})]})}),(0,s.jsx)(m.Z,{hover:!0,className:(0,g.cn)("p-6 text-white border-none",i>=0?"bg-gradient-to-br from-primary-500 to-violet-600":"bg-gradient-to-br from-orange-500 to-red-600"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white/80 text-sm font-medium mb-1",children:"Current Balance"}),(0,s.jsx)("p",{className:"text-3xl font-bold tracking-tight",children:d(i,r)})]}),(0,s.jsx)("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:(0,s.jsx)(p.Z,{className:"w-8 h-8 text-white"})})]})})]})]})}var b=a(79313),j=a(16235),w=a(87293),v=a(5589),y=a(68291),N=a(73067),S=a(11981);function k(e){let{username:t,savingsVault:a,currency:l,balance:n,onUpdate:i}=e,[c,x]=(0,r.useState)(""),[h,u]=(0,r.useState)("add"),[p,f]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),Z=async e=>{if(e.preventDefault(),!c||0>=parseFloat(c))return;let a=parseFloat(c);if("add"===h&&n<a){alert("Insufficient balance! You cannot save more than your current balance.");return}f(!0);try{"add"===h?await (0,o.F2)(t,a):await (0,o.y2)(t,a),x(""),i()}catch(e){console.error(e),alert(e.message)}finally{f(!1)}};return(0,s.jsxs)(m.Z,{className:"overflow-hidden border-none bg-gradient-to-br from-violet-600 to-indigo-700 text-white shadow-2xl shadow-indigo-500/20",children:[(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"bg-white/20 p-3 rounded-2xl backdrop-blur-sm",children:(0,s.jsx)(j.Z,{className:"w-8 h-8 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"Savings Vault"}),(0,s.jsxs)("p",{className:"text-indigo-100",children:["Total Saved: ",(0,s.jsx)("span",{className:"font-bold text-white text-lg",children:d(a,l)})]})]})]}),!k&&(0,s.jsxs)(b.z,{onClick:()=>C(!0),variant:"secondary",className:"bg-white/10 text-white border-white/20 hover:bg-white/20",children:["Open Vault ",(0,s.jsx)(w.Z,{className:"ml-2 w-4 h-4"})]})]})}),(0,s.jsx)("div",{className:(0,g.cn)("transition-all duration-500 ease-in-out overflow-hidden bg-white/5 backdrop-blur-sm",k?"max-h-[600px] opacity-100 border-t border-white/10":"max-h-0 opacity-0"),children:(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-indigo-100",children:[(0,s.jsx)(v.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Secure Vault Access"})]}),(0,s.jsx)(b.z,{size:"sm",variant:"ghost",onClick:()=>C(!1),className:"text-white hover:bg-white/10 hover:text-white",children:"Close"})]}),(0,s.jsxs)("div",{className:"bg-white/10 rounded-2xl p-6 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-6 bg-black/20 p-1 rounded-xl",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>u("add"),className:(0,g.cn)("flex-1 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center gap-2","add"===h?"bg-white text-indigo-600 shadow-lg":"text-white/70 hover:text-white hover:bg-white/5"),children:[(0,s.jsx)(y.Z,{className:"w-4 h-4"})," Deposit"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>u("withdraw"),className:(0,g.cn)("flex-1 py-2.5 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center gap-2","withdraw"===h?"bg-white text-indigo-600 shadow-lg":"text-white/70 hover:text-white hover:bg-white/5"),children:[(0,s.jsx)(N.Z,{className:"w-4 h-4"})," Withdraw"]})]}),(0,s.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-indigo-100 ml-1 mb-2 block",children:["Amount (",l,")"]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{type:"number",step:"0.01",min:"0",value:c,onChange:e=>x(e.target.value),placeholder:"0.00",className:"w-full bg-black/20 border-2 border-white/10 rounded-xl px-4 py-3 text-white placeholder:text-white/30 focus:outline-none focus:border-white/30 focus:bg-black/30 transition-all font-mono text-lg",required:!0})})]}),"add"===h&&n<parseFloat(c||"0")&&(0,s.jsxs)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-xl p-3 flex items-center gap-3 text-red-100 text-sm",children:[(0,s.jsx)(S.Z,{className:"w-5 h-5 shrink-0"}),(0,s.jsxs)("p",{children:["Insufficient balance. Available: ",d(n,l)]})]}),(0,s.jsx)(b.z,{type:"submit",disabled:p||"add"===h&&n<parseFloat(c||"0"),className:"w-full bg-white text-indigo-600 hover:bg-indigo-50 border-none",size:"lg",isLoading:p,children:"add"===h?"Confirm Deposit":"Confirm Withdrawal"})]})]}),(0,s.jsx)("p",{className:"text-xs text-indigo-200 text-center opacity-80",children:"Funds in the vault are separated from your main balance."})]})})]})}var C=a(64203),Z=a(83523),E=a(62442);let F=e=>{let{className:t,label:a,error:l,value:n,onChange:i,options:o}=e,[c,d]=(0,r.useState)(!1),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let x=e=>{i&&i({target:{value:e}}),d(!1)},h=o.find(e=>e.value===n);return(0,s.jsxs)("div",{className:"w-full space-y-2",ref:m,children:[a&&(0,s.jsx)("label",{className:"text-sm font-semibold text-slate-700 ml-1",children:a}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>d(!c),className:(0,g.cn)("w-full flex items-center justify-between rounded-xl border-2 border-slate-200 bg-white/50 px-4 py-3 text-slate-900 focus:border-primary-500 focus:ring-4 focus:ring-primary-500/10 outline-none transition-all duration-200 text-left",l&&"border-danger-500 focus:border-danger-500 focus:ring-danger-500/10",c&&"border-primary-500 ring-4 ring-primary-500/10",t),children:[(0,s.jsx)("span",{className:h?"":"text-slate-400",children:h?h.label:"Select..."}),(0,s.jsx)(Z.Z,{className:(0,g.cn)("h-4 w-4 text-slate-500 transition-transform duration-200",c&&"transform rotate-180")})]}),c&&(0,s.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-white rounded-xl border border-slate-100 shadow-xl animate-in fade-in slide-in-from-top-2 duration-200 overflow-hidden",children:(0,s.jsx)("div",{className:"max-h-60 overflow-auto py-1",children:o.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>x(e.value),className:(0,g.cn)("w-full flex items-center justify-between px-4 py-2.5 text-sm text-left hover:bg-slate-50 transition-colors",n===e.value&&"bg-primary-50 text-primary-700 font-medium"),children:[e.label,n===e.value&&(0,s.jsx)(E.Z,{className:"h-4 w-4 text-primary-600"})]},e.value))})})]}),l&&(0,s.jsx)("p",{className:"text-sm text-danger-600 ml-1 animate-slide-up",children:l})]})};var T=a(13008),D=a(9224),z=a(9883),A=a(41298),P=a(45367);function O(e){let{username:t,categories:a,currency:l}=e,[n,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[x,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[w,v]=(0,r.useState)(!1),[y]=(0,r.useState)(new Date().toISOString().slice(0,7));(0,r.useEffect)(()=>{t&&N()},[t]);let N=async()=>{try{let e=await (0,o.Wi)(t,y);i(e.budget_status||[])}catch(e){console.error("Failed to load budgets:",e)}},k=async e=>{if(e.preventDefault(),p&&f){v(!0);try{await (0,o.Uc)(t,p,parseFloat(f),y,l),g(""),j(""),d(!1),await N()}catch(e){alert(e.message||"Failed to set budget")}finally{v(!1)}}},E=async e=>{if(confirm("Are you sure you want to delete the budget for ".concat(e,"?")))try{var a;let s=await (0,o.Wi)(t,y);(null===(a=s.budget_status)||void 0===a?void 0:a.find(t=>t.category===e))&&(await (0,o.sX)("".concat(t,"_").concat(e,"_").concat(y)),await N())}catch(e){alert(e.message||"Failed to delete budget")}},O=e=>{switch(e){case"good":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"exceeded":return"bg-red-50 border-red-200";default:return"bg-slate-50 border-slate-200"}},R=e=>{switch(e){case"good":return(0,s.jsx)(T.Z,{className:"w-5 h-5 text-green-600"});case"warning":return(0,s.jsx)(S.Z,{className:"w-5 h-5 text-yellow-600"});case"exceeded":return(0,s.jsx)(S.Z,{className:"w-5 h-5 text-red-600"});default:return(0,s.jsx)(h.Z,{className:"w-5 h-5 text-slate-400"})}},I=e=>{switch(e){case"good":return"bg-green-500";case"warning":return"bg-yellow-500";case"exceeded":return"bg-red-500";default:return"bg-slate-400"}};return(0,s.jsxs)(m.Z,{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(x?"p-6":"p-4"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>u(!x),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:x?"Collapse":"Expand",children:x?(0,s.jsx)(D.Z,{className:"w-5 h-5 text-slate-600"}):(0,s.jsx)(Z.Z,{className:"w-5 h-5 text-slate-600"})}),(0,s.jsx)("div",{className:"bg-gradient-to-br from-primary-600 to-violet-600 rounded-xl shadow-lg transition-all duration-500 ".concat(x?"p-3":"p-2"),children:(0,s.jsx)(h.Z,{className:"text-white transition-all duration-500 ".concat(x?"w-6 h-6":"w-5 h-5")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-bold text-slate-900 font-heading transition-all duration-500 ".concat(x?"text-2xl":"text-lg"),children:"Monthly Budgets"}),x&&(0,s.jsxs)("p",{className:"text-sm text-slate-500 mt-1 animate-in fade-in slide-in-from-left-2 duration-300",children:["Track spending limits for ",new Date(y+"-01").toLocaleDateString("default",{month:"long",year:"numeric"})]})]})]}),x&&(0,s.jsxs)(b.z,{onClick:()=>d(!c),className:"w-44 gap-2 animate-in fade-in zoom-in duration-300 bg-gradient-to-r from-primary-600 to-violet-600 hover:from-primary-700 hover:to-violet-700 shadow-md hover:shadow-lg transition-all",children:[(0,s.jsx)(z.Z,{className:"w-4 h-4"})," Add Budget"]})]}),(0,s.jsxs)("div",{className:"transition-all duration-500 ease-in-out ".concat(x?"mt-6 opacity-100":"mt-0 opacity-0 h-0 overflow-hidden"),children:[c&&(0,s.jsxs)("form",{onSubmit:k,className:"mb-6 p-6 bg-white rounded-xl border-2 border-primary-100 shadow-sm animate-in fade-in slide-in-from-top-4 duration-300",children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 mb-4 text-lg",children:"Set Budget Limit"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(F,{label:"Category",value:p,onChange:e=>g(e.target.value),options:a.map(e=>({value:e,label:e}))})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Budget Amount"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(A.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),(0,s.jsx)(C.I,{type:"number",placeholder:"0.00",value:f,onChange:e=>j(e.target.value),required:!0,min:"0",step:"0.01",className:"pl-10 bg-white border-slate-300 focus:border-primary-500 focus:ring-primary-500"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6 justify-end",children:[(0,s.jsx)(b.z,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,s.jsx)(b.z,{type:"submit",disabled:w,children:w?"Setting...":"Set Budget"})]})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===n.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-slate-50 rounded-xl border-2 border-dashed border-slate-200",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:(0,s.jsx)(h.Z,{className:"w-8 h-8 text-slate-400"})}),(0,s.jsx)("p",{className:"text-slate-600 font-medium",children:"No budgets set for this month"}),(0,s.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:'Click "Add Budget" to start tracking your spending limits!'})]}):n.map((e,t)=>(0,s.jsxs)("div",{className:"p-5 rounded-xl border transition-all duration-300 hover:shadow-md animate-in fade-in slide-in-from-bottom-4 ".concat(O(e.status)),style:{animationDelay:"".concat(100*t,"ms")},children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[R(e.status),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-slate-900",children:e.category}),(0,s.jsxs)("p",{className:"text-sm text-slate-600 font-medium",children:["exceeded"===e.status&&"⚠️ Over budget!","warning"===e.status&&"⚡ Approaching limit","good"===e.status&&"✓ On track"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("span",{className:"text-2xl font-bold ".concat(e.percentage>100?"text-red-600":"text-slate-900"),children:[e.percentage.toFixed(0),"%"]}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"used"})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,s.jsxs)("span",{className:"text-slate-600 font-medium",children:["Spent: ",l," ",e.spent.toLocaleString()]}),(0,s.jsxs)("span",{className:"text-slate-600 font-medium",children:["Limit: ",l," ",e.budget.toLocaleString()]})]}),(0,s.jsx)("div",{className:"w-full bg-white/50 rounded-full h-3 overflow-hidden border border-slate-200/50",children:(0,s.jsx)("div",{className:"h-full rounded-full transition-all duration-1000 ease-out ".concat(I(e.status)),style:{width:"".concat(Math.min(e.percentage,100),"%")}})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-3 border-t border-slate-200/50",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-slate-700",children:["Remaining: ",(0,s.jsxs)("span",{className:"font-bold ".concat(e.remaining>=0?"text-green-600":"text-red-600"),children:[l," ",Math.abs(e.remaining).toLocaleString(),e.remaining<0&&" over"]})]}),(0,s.jsx)("button",{onClick:()=>E(e.category),className:"text-slate-400 hover:text-red-500 p-1.5 hover:bg-red-50 rounded-lg transition-colors",title:"Delete budget",children:(0,s.jsx)(P.Z,{className:"w-4 h-4"})})]})]},e.category))}),n.some(e=>"good"!==e.status)&&(0,s.jsx)("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl animate-in fade-in slide-in-from-bottom-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(S.Z,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-yellow-900",children:"Budget Alerts"}),(0,s.jsxs)("p",{className:"text-sm text-yellow-800 mt-1",children:[n.filter(e=>"exceeded"===e.status).length>0&&"".concat(n.filter(e=>"exceeded"===e.status).length," budget(s) exceeded. "),n.filter(e=>"warning"===e.status).length>0&&"".concat(n.filter(e=>"warning"===e.status).length," budget(s) approaching limit.")]})]})]})})]})]})}var R=a(66654),I=a(28203);function _(e){let{username:t,currency:a,onUpdate:l}=e,[n,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[x,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),[w,v]=(0,r.useState)(""),[y,N]=(0,r.useState)(!1),[S,k]=(0,r.useState)(null),[E,F]=(0,r.useState)(""),[T,O]=(0,r.useState)("");(0,r.useEffect)(()=>{t&&_()},[t]);let _=async()=>{try{O("");let e=await (0,o.M6)(t);i(e)}catch(e){console.error("Failed to load goals:",e),O(e.message||"Failed to load goals")}},B=async e=>{if(e.preventDefault(),p&&f&&w){N(!0),O("");try{await (0,o.HZ)(t,p,parseFloat(f),w,a),g(""),j(""),v(""),d(!1),await _()}catch(e){console.error("Create goal error:",e),O(e.message||"Failed to create goal"),alert(e.message||"Failed to create goal. Please check if backend is running.")}finally{N(!1)}}},L=async e=>{if(E){N(!0),O("");try{await (0,o.k1)(e,parseFloat(E)),k(null),F(""),await _(),l&&l()}catch(e){console.error("Contribute error:",e),O(e.message||"Failed to contribute"),alert(e.message||"Failed to contribute to goal")}finally{N(!1)}}},K=async e=>{if(confirm("Are you sure you want to delete this goal?")){O("");try{await (0,o.s6)(e),await _()}catch(e){console.error("Delete error:",e),O(e.message||"Failed to delete goal"),alert(e.message||"Failed to delete goal")}}},J=new Date().toISOString().split("T")[0];return(0,s.jsxs)(m.Z,{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(x?"p-6":"p-4"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>u(!x),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:x?"Collapse":"Expand",children:x?(0,s.jsx)(D.Z,{className:"w-5 h-5 text-slate-600"}):(0,s.jsx)(Z.Z,{className:"w-5 h-5 text-slate-600"})}),(0,s.jsx)("div",{className:"bg-gradient-to-br from-primary-600 to-violet-600 rounded-xl shadow-lg transition-all duration-500 ".concat(x?"p-3":"p-2"),children:(0,s.jsx)(R.Z,{className:"text-white transition-all duration-500 ".concat(x?"w-6 h-6":"w-5 h-5")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-bold text-slate-900 font-heading transition-all duration-500 ".concat(x?"text-2xl":"text-lg"),children:"Financial Goals"}),x&&(0,s.jsx)("p",{className:"text-sm text-slate-500 animate-in fade-in slide-in-from-left-2 duration-300",children:"Track your savings targets"})]})]}),x&&(0,s.jsxs)(b.z,{onClick:()=>d(!c),className:"gap-2 animate-in fade-in zoom-in duration-300",children:[(0,s.jsx)(z.Z,{className:"w-4 h-4"})," New Goal"]})]}),(0,s.jsxs)("div",{className:"transition-all duration-500 ease-in-out ".concat(x?"mt-6 opacity-100":"mt-0 opacity-0 h-0 overflow-hidden"),children:[T&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg animate-in fade-in slide-in-from-top-2",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:T})}),(0,s.jsxs)("div",{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(x?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"),children:[c&&(0,s.jsxs)("form",{onSubmit:B,className:"mb-6 p-6 bg-white rounded-xl border-2 border-primary-100 shadow-sm animate-in fade-in slide-in-from-top-4 duration-300",children:[(0,s.jsx)("h3",{className:"font-bold text-slate-900 mb-4 text-lg",children:"Create New Goal"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Goal Name"}),(0,s.jsx)(C.I,{placeholder:"e.g., Emergency Fund, Vacation",value:p,onChange:e=>g(e.target.value),required:!0,className:"bg-white border-slate-300 focus:border-primary-500 focus:ring-primary-500"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Target Amount"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(A.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 z-10"}),(0,s.jsx)(C.I,{type:"number",placeholder:"0.00",value:f,onChange:e=>j(e.target.value),required:!0,min:"0",step:"0.01",className:"pl-10 bg-white border-slate-300 focus:border-primary-500 focus:ring-primary-500"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Target Date"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(I.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 z-10"}),(0,s.jsx)(C.I,{type:"date",value:w,onChange:e=>v(e.target.value),required:!0,min:J,className:"pl-10 bg-white border-slate-300 focus:border-primary-500 focus:ring-primary-500"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6 justify-end",children:[(0,s.jsx)(b.z,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,s.jsx)(b.z,{type:"submit",disabled:y,children:y?"Creating...":"Create Goal"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:0===n.length?(0,s.jsxs)("div",{className:"col-span-2 text-center py-12 bg-slate-50 rounded-xl border-2 border-dashed border-slate-200",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:(0,s.jsx)(R.Z,{className:"w-8 h-8 text-primary-400"})}),(0,s.jsx)("p",{className:"text-slate-600 font-medium",children:"No goals yet"}),(0,s.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Set your first financial goal to start tracking!"})]}):n.map((e,t)=>(0,s.jsxs)("div",{className:"p-5 border border-slate-200 rounded-xl bg-white hover:shadow-lg hover:border-primary-200 transition-all duration-300 animate-in fade-in slide-in-from-bottom-4",style:{animationDelay:"".concat(100*t,"ms")},children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-slate-900",children:e.name}),(0,s.jsx)("button",{onClick:()=>K(e.id),className:"text-slate-400 hover:text-red-500 p-1.5 hover:bg-red-50 rounded-lg transition-colors",children:(0,s.jsx)(P.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"space-y-3 mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,s.jsx)("span",{className:"text-slate-600 font-medium",children:"Progress"}),(0,s.jsxs)("span",{className:"font-bold text-primary-700 bg-primary-50 px-2 py-0.5 rounded-full text-xs",children:[e.progress_percentage.toFixed(1),"%"]})]}),(0,s.jsx)("div",{className:"relative w-full bg-slate-100 rounded-full h-3 overflow-hidden",children:(0,s.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-primary-500 to-violet-600 rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(Math.min(e.progress_percentage,100),"%")}})}),(0,s.jsxs)("div",{className:"flex justify-between text-xs mt-2 text-slate-500 font-medium",children:[(0,s.jsxs)("span",{children:[a," ",e.current_amount.toLocaleString()]}),(0,s.jsxs)("span",{children:[a," ",e.target_amount.toLocaleString()]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-500 mb-1",children:[(0,s.jsx)(I.Z,{className:"w-3.5 h-3.5"}),(0,s.jsx)("span",{className:"text-xs font-medium",children:"Deadline"})]}),(0,s.jsxs)("p",{className:"text-sm font-bold text-slate-900",children:[e.days_remaining," days"]})]}),(0,s.jsxs)("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-slate-500 mb-1",children:[(0,s.jsx)(A.Z,{className:"w-3.5 h-3.5"}),(0,s.jsx)("span",{className:"text-xs font-medium",children:"Daily"})]}),(0,s.jsxs)("p",{className:"text-sm font-bold text-slate-900",children:[a," ",e.daily_savings_required.toLocaleString()]})]})]}),S===e.id?(0,s.jsxs)("div",{className:"flex gap-2 animate-in fade-in zoom-in duration-200",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(A.Z,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 w-3.5 h-3.5 text-slate-400 z-10 pointer-events-none"}),(0,s.jsx)(C.I,{type:"number",placeholder:"Amount",value:E,onChange:e=>F(e.target.value),min:"0",step:"0.01",className:"pl-8 h-9 text-sm bg-white relative z-0",autoFocus:!0})]}),(0,s.jsx)(b.z,{onClick:()=>L(e.id),disabled:y||!E,size:"sm",className:"h-9",children:"Add"}),(0,s.jsx)(b.z,{variant:"outline",onClick:()=>{k(null),F("")},size:"sm",className:"h-9",children:"Cancel"})]}):(0,s.jsxs)(b.z,{onClick:()=>k(e.id),className:"w-full gap-2 group hover:shadow-md transition-all",variant:"outline",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4 text-primary-600 group-hover:scale-110 transition-transform"}),"Contribute"]})]},e.id))})]})]})]})}function B(){let e=new Date().getFullYear();return(0,s.jsx)("footer",{className:"bg-slate-900 text-slate-300 mt-20 border-t border-slate-800",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold bg-gradient-to-r from-primary-400 to-violet-400 bg-clip-text text-transparent font-heading",children:"Expense Tracker"}),(0,s.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed max-w-xs",children:"Your personal finance command center. Track expenses, manage savings, and achieve your financial freedom with our premium suite of tools."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-white mb-6 font-heading",children:"Features"}),(0,s.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-primary-500",children:"✓"}),"Multi-currency Support"]}),(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-primary-500",children:"✓"}),"Secure Savings Vault"]}),(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-primary-500",children:"✓"}),"Interactive Analytics"]}),(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-primary-500",children:"✓"}),"Excel Export Reports"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-white mb-6 font-heading",children:"Quick Links"}),(0,s.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"/dashboard",className:"hover:text-primary-400 transition-colors duration-200 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-1 bg-slate-600 rounded-full"})," Dashboard"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"/profile",className:"hover:text-primary-400 transition-colors duration-200 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-1 bg-slate-600 rounded-full"})," Profile"]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("a",{href:"/about",className:"hover:text-primary-400 transition-colors duration-200 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-1 bg-slate-600 rounded-full"})," About Us"]})})]})]})]}),(0,s.jsxs)("div",{className:"border-t border-slate-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center text-sm text-slate-500",children:[(0,s.jsxs)("p",{children:["\xa9 ",e," Expense Tracker. All rights reserved."]}),(0,s.jsxs)("p",{className:"mt-2 md:mt-0 flex items-center gap-1",children:["Made with ",(0,s.jsx)("span",{className:"text-red-500",children:"❤️"})," for financial wellness"]})]})]})})}var L=a(91981),K=a(76637);function J(e){let{onSubmit:t,categories:a,currencies:l}=e,[n,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)({type:"expense",category:"Food",amount:"",description:"",date:new Date().toISOString().split("T")[0],currency:"PKR"}),d=async e=>{e.preventDefault(),i(!0);try{await t(o),c(e=>({...e,amount:"",description:"",category:a[e.type][0]}))}catch(e){console.error(e)}finally{i(!1)}},x=a[o.type]||[];return(0,s.jsxs)(m.Z,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"bg-primary-100 p-3 rounded-xl text-primary-600",children:(0,s.jsx)(L.Z,{className:"w-6 h-6"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Add Transaction"})]}),(0,s.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(F,{label:"Type",value:o.type,onChange:e=>c({...o,type:e.target.value,category:a[e.target.value][0]}),options:[{value:"expense",label:"\uD83D\uDCB8 Expense"},{value:"income",label:"\uD83D\uDCB0 Income"}]}),(0,s.jsx)(F,{label:"Category",value:o.category,onChange:e=>c({...o,category:e.target.value}),options:x.map(e=>({value:e,label:e}))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(C.I,{label:"Amount",type:"number",step:"0.01",required:!0,placeholder:"0.00",value:o.amount,onChange:e=>c({...o,amount:e.target.value}),icon:(0,s.jsx)(A.Z,{className:"w-4 h-4"})}),(0,s.jsx)(F,{label:"Currency",value:o.currency,onChange:e=>c({...o,currency:e.target.value}),options:l.map(e=>({value:e,label:e}))})]}),(0,s.jsx)(C.I,{label:"Description",required:!0,placeholder:"What was this for?",value:o.description,onChange:e=>c({...o,description:e.target.value}),icon:(0,s.jsx)(K.Z,{className:"w-4 h-4"})}),(0,s.jsx)(C.I,{label:"Date",type:"date",required:!0,value:o.date,onChange:e=>c({...o,date:e.target.value}),icon:(0,s.jsx)(I.Z,{className:"w-4 h-4"})}),(0,s.jsx)(b.z,{type:"submit",className:"w-full mt-2",size:"lg",isLoading:n,children:"Add Transaction"})]})]})}var U=a(98783),q=a(33673),G=a(51274);function M(e){let{transactions:t,onDelete:a,currency:r}=e;return(0,s.jsxs)(m.Z,{className:"p-6 h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"bg-success-50 p-3 rounded-xl text-success-600",children:(0,s.jsx)(U.Z,{className:"w-6 h-6"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:"Recent Transactions"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-3 pr-2",children:0===t.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-48 text-slate-400",children:[(0,s.jsx)(q.Z,{className:"w-12 h-12 mb-2 opacity-20"}),(0,s.jsx)("p",{children:"No transactions found"})]}):t.map(e=>(0,s.jsxs)("div",{className:"group flex items-center justify-between p-4 rounded-xl bg-slate-50 border border-slate-100 hover:bg-white hover:shadow-md transition-all duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:(0,g.cn)("p-3 rounded-full","income"===e.type?"bg-success-100 text-success-600":"bg-danger-50 text-danger-600"),children:"income"===e.type?(0,s.jsx)(U.Z,{className:"w-5 h-5"}):(0,s.jsx)(G.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-slate-800",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-1",children:[(0,s.jsx)("span",{className:"bg-slate-200 px-2 py-0.5 rounded-full",children:e.category}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(I.Z,{className:"w-3 h-3"})," ",e.date]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:(0,g.cn)("font-bold text-lg","income"===e.type?"text-success-600":"text-danger-600"),children:["income"===e.type?"+":"-",d(e.amount,r)]}),(0,s.jsx)("button",{onClick:()=>a(e.id),className:"opacity-0 group-hover:opacity-100 p-2 text-slate-400 hover:text-danger-500 hover:bg-danger-50 rounded-lg transition-all",title:"Delete Transaction",children:(0,s.jsx)(P.Z,{className:"w-4 h-4"})})]})]},e.id))})]})}var V=a(45253),W=a(57703),H=a(28485),Y=a(36612),Q=a(86812),X=a(79857),$=a(44909),ee=a(16573),et=a(24235),ea=a(50039),es=a(31346),er=a(30525),el=a(77216),en=a(99670);let ei=["#3B82F6","#8B5CF6","#EC4899","#F59E0B","#10B981","#EF4444","#6366F1"];function eo(e){let{report:t,showCharts:a,setShowCharts:l,username:n}=e,[i,c]=(0,r.useState)([]);(0,r.useEffect)(()=>{n&&d()},[n]);let d=async()=>{try{let e=await (0,o.M6)(n);c(e)}catch(e){console.error("Failed to load goals:",e)}},x=(null==t?void 0:t.categoryBreakdown)||(null==t?void 0:t.category_breakdown)?Object.entries((null==t?void 0:t.categoryBreakdown)||(null==t?void 0:t.category_breakdown)||{}).map(e=>{let[t,a]=e;return{name:t,value:Number(a)}}):[],h=i.reduce((e,t)=>e+(t.current_amount||0),0),u=h>0?[...x,{name:"Financial Goals",value:h}]:x,p=[{name:"Income",value:(null==t?void 0:t.totalIncome)||(null==t?void 0:t.total_income)||0,fill:"#10B981"},{name:"Expense",value:(null==t?void 0:t.totalExpense)||(null==t?void 0:t.total_expense)||0,fill:"#EF4444"},{name:"Savings",value:(null==t?void 0:t.savingsVault)||0,fill:"#8B5CF6"},{name:"Goals",value:h,fill:"#F59E0B"}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"bg-primary-100 p-2 rounded-lg text-primary-600",children:(0,s.jsx)(er.Z,{className:"w-6 h-6"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Analytics Overview"})]}),(0,s.jsxs)(b.z,{variant:"outline",size:"sm",onClick:()=>l(!a),className:"gap-2",children:[a?(0,s.jsx)(el.Z,{className:"w-4 h-4"}):(0,s.jsx)(en.Z,{className:"w-4 h-4"}),a?"Hide Charts":"Show Charts"]})]}),(0,s.jsx)("div",{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(a?"max-h-[800px] opacity-100":"max-h-0 opacity-0"),children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)(m.Z,{className:"p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-slate-700 mb-6 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-6 bg-primary-500 rounded-full"}),"Expense Breakdown"]}),u.length>0?(0,s.jsx)("div",{className:"h-[300px] w-full",children:(0,s.jsx)(V.h,{width:"100%",height:"100%",children:(0,s.jsxs)(W.u,{children:[(0,s.jsx)(H.b,{data:u,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:u.map((e,t)=>(0,s.jsx)(Y.b,{fill:ei[t%ei.length]},"cell-".concat(t)))}),(0,s.jsx)(Q.u,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"}}),(0,s.jsx)(X.D,{})]})})}):(0,s.jsx)("div",{className:"h-[300px] flex items-center justify-center text-slate-400",children:"No expense data available"})]}),(0,s.jsxs)(m.Z,{className:"p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-bold text-slate-700 mb-6 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-6 bg-success-500 rounded-full"}),"Financial Overview"]}),(0,s.jsx)("div",{className:"h-[300px] w-full",children:(0,s.jsx)(V.h,{width:"100%",height:"100%",children:(0,s.jsxs)($.v,{data:p,children:[(0,s.jsx)(ee.q,{strokeDasharray:"3 3",stroke:"#f1f5f9",vertical:!1}),(0,s.jsx)(et.K,{dataKey:"name",axisLine:!1,tickLine:!1}),(0,s.jsx)(ea.B,{axisLine:!1,tickLine:!1}),(0,s.jsx)(Q.u,{cursor:{fill:"#f8fafc"},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"}}),(0,s.jsx)(es.$,{dataKey:"value",radius:[8,8,0,0],children:p.map((e,t)=>(0,s.jsx)(Y.b,{fill:e.fill},"cell-".concat(t)))})]})})})]})]})})]})}var ec=a(32176),ed=a(82549),em=a(86264),ex=a(76020);function eh(e){let{username:t}=e,[a,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)([{role:"assistant",content:"Hi! I'm your financial assistant. Ask me anything about your expenses, income, or savings!",timestamp:new Date}]),[c,d]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),h=(0,r.useRef)(null),u=()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{u()},[n]);let p=async()=>{if(!c.trim()||m)return;let e={role:"user",content:c,timestamp:new Date};i(t=>[...t,e]),d(""),x(!0);try{let e=await (0,o.bE)(t,c),a={role:"assistant",content:e.response,timestamp:new Date};i(e=>[...e,a])}catch(t){let e={role:"assistant",content:"Sorry, I encountered an error: ".concat(t.message,". Please try again."),timestamp:new Date};i(t=>[...t,e])}finally{x(!1)}};return a?(0,s.jsxs)("div",{className:"fixed bottom-6 right-6 w-96 h-[600px] bg-white rounded-2xl shadow-2xl border border-slate-200 flex flex-col z-50 overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-primary-600 to-violet-600 text-white p-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"bg-white/20 p-2 rounded-lg",children:(0,s.jsx)(ec.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold",children:"Financial Assistant"}),(0,s.jsx)("p",{className:"text-xs text-white/80",children:"Powered by AI"})]})]}),(0,s.jsx)("button",{onClick:()=>l(!1),className:"hover:bg-white/20 p-2 rounded-lg transition-colors",children:(0,s.jsx)(ed.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50",children:[n.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-[80%] rounded-2xl px-4 py-2 ".concat("user"===e.role?"bg-gradient-to-r from-primary-600 to-violet-600 text-white":"bg-white text-slate-800 border border-slate-200 shadow-sm"),children:[(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.content}),(0,s.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.role?"text-white/70":"text-slate-400"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},t)),m&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-white text-slate-800 border border-slate-200 rounded-2xl px-4 py-3 shadow-sm",children:(0,s.jsx)(em.Z,{className:"w-5 h-5 animate-spin text-primary-600"})})}),(0,s.jsx)("div",{ref:h})]}),(0,s.jsxs)("div",{className:"p-4 bg-white border-t border-slate-200",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},placeholder:"Ask about your finances...",disabled:m,className:"flex-1 px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-slate-100 disabled:cursor-not-allowed"}),(0,s.jsx)(b.z,{onClick:p,disabled:!c.trim()||m,className:"px-4 py-2 bg-gradient-to-r from-primary-600 to-violet-600 text-white rounded-xl hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(ex.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("p",{className:"text-xs text-slate-400 mt-2 text-center",children:"AI-powered insights based on your data"})]})]}):(0,s.jsxs)("button",{onClick:()=>l(!0),className:"fixed bottom-6 right-6 bg-gradient-to-r from-primary-600 to-violet-600 text-white rounded-full p-4 shadow-2xl hover:shadow-primary-500/50 transition-all duration-300 hover:scale-110 z-50 group",children:[(0,s.jsx)(ec.Z,{className:"w-6 h-6"}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})}var eu=a(25119),ep=a(67972),eg=a(74056),ef=a(35817),eb=a(65883);function ej(){let e=(0,l.useRouter)(),[t,a]=(0,r.useState)(null),[n,c]=(0,r.useState)(null),[d,m]=(0,r.useState)([]),[x,h]=(0,r.useState)(null),[u,p]=(0,r.useState)(!0),[g,j]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let t=localStorage.getItem("username");if(!t){e.push("/login");return}a(t),w(t)},[e]);let w=async e=>{try{let[t,a,s]=await Promise.all([(0,o.f1)(e),(0,o.kA)(e),(0,o.Ai)(e)]);m(t),h(a),c(s)}catch(e){console.error("Failed to load data:",e)}finally{p(!1)}},v=async e=>{t&&n&&(await (0,o.dT)({username:t,...e}),await w(t))},y=async e=>{if(confirm("Are you sure you want to delete this transaction?"))try{await (0,o.Ks)(e),t&&await w(t)}catch(e){alert(e.message)}},N={expense:["Food","Transport","Utilities","Entertainment","Healthcare","Shopping","Other"],income:["Salary","Freelance","Investments","Savings","Other"]};return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,s.jsx)("nav",{className:"bg-white/80 backdrop-blur-xl border-b border-slate-200 sticky top-0 z-50",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-primary-600 to-violet-600 p-2 rounded-xl shadow-lg shadow-primary-500/20",children:(0,s.jsx)(eu.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-primary-700 to-violet-700 bg-clip-text text-transparent font-heading",children:"Expense Tracker"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-2 px-3 py-1.5 bg-slate-100 rounded-full border border-slate-200",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-sm font-medium text-slate-600",children:t})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i(),{href:"/profile",children:(0,s.jsxs)(b.z,{variant:"ghost",size:"sm",className:"hidden md:flex gap-2",children:[(0,s.jsx)(ep.Z,{className:"w-4 h-4"})," Profile"]})}),(0,s.jsx)(i(),{href:"/about",children:(0,s.jsxs)(b.z,{variant:"ghost",size:"sm",className:"hidden md:flex gap-2",children:[(0,s.jsx)(eg.Z,{className:"w-4 h-4"})," About"]})}),(0,s.jsxs)(b.z,{variant:"outline",size:"sm",onClick:()=>{t&&(0,o.r8)(t)},className:"gap-2 text-primary-600 border-primary-200 hover:bg-primary-50",children:[(0,s.jsx)(ef.Z,{className:"w-4 h-4"})," Export"]}),(0,s.jsx)(b.z,{variant:"danger",size:"sm",onClick:()=>{localStorage.removeItem("username"),e.push("/login")},className:"gap-2",children:(0,s.jsx)(eb.Z,{className:"w-4 h-4"})})]})]})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-slate-900 font-heading",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-slate-500 mt-1",children:"Overview of your financial health"})]}),(0,s.jsxs)("div",{className:"text-sm text-slate-500 bg-white px-4 py-2 rounded-lg border border-slate-200 shadow-sm",children:["Currency: ",(0,s.jsx)("span",{className:"font-bold text-slate-900",children:(null==n?void 0:n.currency)||"PKR"})]})]}),(0,s.jsx)(f,{report:x,loading:u,currency:(null==n?void 0:n.currency)||"PKR"}),(0,s.jsx)(k,{username:t||"",savingsVault:(null==n?void 0:n.savingsVault)||0,currency:(null==n?void 0:n.currency)||"PKR",balance:(null==x?void 0:x.balance)||0,onUpdate:()=>w(t||"")}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)(J,{onSubmit:v,categories:N,currencies:["PKR","USD","EUR","GBP","SAR","AED"]})}),(0,s.jsx)("div",{className:"lg:col-span-2 h-[600px]",children:(0,s.jsx)(M,{transactions:d,onDelete:y,currency:(null==n?void 0:n.currency)||"PKR"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsx)(O,{username:t||"",categories:N.expense,currency:(null==n?void 0:n.currency)||"PKR"}),(0,s.jsx)(_,{username:t||"",currency:(null==n?void 0:n.currency)||"PKR",onUpdate:()=>w(t||"")})]}),(0,s.jsx)(eo,{report:x,showCharts:g,setShowCharts:j,username:t||""})]}),(0,s.jsx)(B,{}),t&&(0,s.jsx)(eh,{username:t})]})}},79313:function(e,t,a){"use strict";a.d(t,{z:function(){return i}});var s=a(57437),r=a(2265),l=a(1657),n=a(86264);let i=r.forwardRef((e,t)=>{let{className:a,variant:r="default",size:i="md",isLoading:o,children:c,...d}=e;return(0,s.jsxs)("button",{ref:t,className:(0,l.cn)("relative inline-flex items-center justify-center rounded-xl font-medium transition-all duration-200 disabled:opacity-50 disabled:pointer-events-none active:scale-[0.98]",{default:"bg-primary-600 text-white hover:bg-primary-700 shadow-lg shadow-primary-500/20",outline:"border-2 border-primary-200 text-primary-700 hover:bg-primary-50 hover:border-primary-300",ghost:"text-slate-600 hover:bg-slate-100 hover:text-slate-900",danger:"bg-danger-500 text-white hover:bg-danger-600 shadow-lg shadow-danger-500/20",secondary:"bg-white text-slate-900 border border-slate-200 hover:bg-slate-50 shadow-sm"}[r],{sm:"h-9 px-3 text-sm",md:"h-11 px-6 text-base",lg:"h-14 px-8 text-lg"}[i],a),disabled:o||d.disabled,...d,children:[o&&(0,s.jsx)(n.Z,{className:"mr-2 h-4 w-4 animate-spin"}),c]})});i.displayName="Button"},11543:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var s=a(57437);a(2265);var r=a(1657);function l(e){let{className:t,hover:a=!1,children:l,...n}=e;return(0,s.jsx)("div",{className:(0,r.cn)("bg-white/80 backdrop-blur-xl border border-white/20 rounded-2xl shadow-xl shadow-slate-200/50",a&&"hover:shadow-2xl hover:-translate-y-1 transition-all duration-300",t),...n,children:l})}},64203:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var s=a(57437),r=a(2265),l=a(1657);let n=r.forwardRef((e,t)=>{let{className:a,label:r,error:n,icon:i,...o}=e;return(0,s.jsxs)("div",{className:"w-full space-y-2",children:[r&&(0,s.jsx)("label",{className:"text-sm font-semibold text-slate-700 ml-1",children:r}),(0,s.jsxs)("div",{className:"relative",children:[i&&(0,s.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:i}),(0,s.jsx)("input",{ref:t,className:(0,l.cn)("w-full rounded-xl border-2 border-slate-200 bg-white/50 px-4 py-3 text-slate-900 placeholder:text-slate-400 focus:border-primary-500 focus:ring-4 focus:ring-primary-500/10 outline-none transition-all duration-200",i&&"pl-11",n&&"border-danger-500 focus:border-danger-500 focus:ring-danger-500/10",a),...o})]}),n&&(0,s.jsx)("p",{className:"text-sm text-danger-600 ml-1 animate-slide-up",children:n})]})});n.displayName="Input"},10826:function(e,t,a){"use strict";a.d(t,{Ai:function(){return n},Ee:function(){return i},F2:function(){return g},HZ:function(){return y},Ks:function(){return u},M6:function(){return N},SI:function(){return c},Uc:function(){return j},Wi:function(){return w},bE:function(){return b},dT:function(){return m},f1:function(){return x},gQ:function(){return o},k1:function(){return S},kA:function(){return h},kJ:function(){return d},r8:function(){return p},s6:function(){return k},sX:function(){return v},x4:function(){return l},y2:function(){return f},z2:function(){return r}});let s="http://localhost:8000/api";async function r(e,t,a,r){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"PKR",n=await fetch("".concat(s,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,password:a,fullName:r,currency:l})}),i=await n.json();if(!n.ok)throw Error(i.detail||"Registration failed");return i}async function l(e,t){let a=await fetch("".concat(s,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}),r=await a.json();if(!a.ok)throw Error(r.detail||"Login failed");return r}async function n(e){let t=await fetch("".concat(s,"/profile/").concat(e));if(!t.ok)throw Error("Failed to fetch profile");return t.json()}async function i(e,t){let a=await fetch("".concat(s,"/profile/name"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,fullName:t})}),r=await a.json();if(!a.ok)throw Error(r.detail||"Failed to update name");return r}async function o(e,t,a){let r=await fetch("".concat(s,"/profile/password"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,oldPassword:t,newPassword:a})}),l=await r.json();if(!r.ok)throw Error(l.detail||"Failed to update password");return l}async function c(e,t){let a=await fetch("".concat(s,"/profile/currency"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,currency:t})}),r=await a.json();if(!a.ok)throw Error(r.detail||"Failed to update currency");return r}async function d(){let e=await fetch("".concat(s,"/currency/rates"));if(!e.ok)throw Error("Failed to fetch currency rates");return e.json()}async function m(e){let t=await fetch("".concat(s,"/transactions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw Error(a.detail||"Failed to add transaction");return a}async function x(e){let t=await fetch("".concat(s,"/transactions/").concat(e));if(!t.ok)throw Error("Failed to fetch transactions");return t.json()}async function h(e,t){let a=t?"".concat(s,"/report/").concat(e,"?month=").concat(t):"".concat(s,"/report/").concat(e),r=await fetch(a);if(!r.ok)throw Error("Failed to fetch report");return r.json()}async function u(e){let t=await fetch("".concat(s,"/transactions/").concat(e),{method:"DELETE"}),a=await t.json();if(!t.ok)throw Error(a.detail||"Failed to delete transaction");return a}function p(e,t){let a=t?"".concat(s,"/export/").concat(e,"?month=").concat(t):"".concat(s,"/export/").concat(e);window.open(a,"_blank")}async function g(e,t){let a=await fetch("".concat(s,"/savings/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,amount:t})}),r=await a.json();if(!a.ok)throw Error(r.detail||"Failed to add to savings");return r}async function f(e,t){let a=await fetch("".concat(s,"/savings/withdraw"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,amount:t})}),r=await a.json();if(!a.ok)throw Error(r.detail||"Failed to withdraw from savings");return r}async function b(e,t){let a=await fetch("".concat(s,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,message:t})}),r=await a.json();if(!a.ok)throw Error(r.detail||"Chat failed");return r}async function j(e,t,a,r){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"PKR",n=await fetch("".concat(s,"/budgets/set"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,category:t,amount:a,month:r,currency:l})}),i=await n.json();if(!n.ok)throw Error(i.detail||"Failed to set budget");return i}async function w(e,t){let a=t?"".concat(s,"/budgets/status/").concat(e,"?month=").concat(t):"".concat(s,"/budgets/status/").concat(e),r=await fetch(a);if(!r.ok)throw Error("Failed to fetch budget status");return r.json()}async function v(e){let t=await fetch("".concat(s,"/budgets/").concat(e),{method:"DELETE"}),a=await t.json();if(!t.ok)throw Error(a.detail||"Failed to delete budget");return a}async function y(e,t,a,r){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"PKR",n=await fetch("".concat(s,"/goals/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,name:t,target_amount:a,deadline:r,currency:l})}),i=await n.json();if(!n.ok)throw Error(i.detail||"Failed to create goal");return i}async function N(e){let t=await fetch("".concat(s,"/goals/").concat(e));if(!t.ok)throw Error("Failed to fetch goals");return t.json()}async function S(e,t){let a=await fetch("".concat(s,"/goals/contribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,amount:t})}),r=await a.json();if(!a.ok)throw Error(r.detail||"Failed to contribute to goal");return r}async function k(e){let t=await fetch("".concat(s,"/goals/").concat(e),{method:"DELETE"}),a=await t.json();if(!t.ok)throw Error(a.detail||"Failed to delete goal");return a}},1657:function(e,t,a){"use strict";a.d(t,{cn:function(){return l}});var s=a(57042),r=a(74769);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[844,437,971,938,744],function(){return e(e.s=9300)}),_N_E=e.O()}]);